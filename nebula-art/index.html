<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;700&family=Playfair+Display:wght@400;700&family=Lugrasimo&family=Charm&family=Homemade+Apple&family=Princess+Sofia&family=Kaushan+Script&display=swap" rel="stylesheet">
  <meta charset="UTF-8" />
  <title>Whispers from the Nebula</title>

  <!-- Load p5 exactly once -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.6.0/p5.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/dat-gui/0.7.9/dat.gui.min.js"></script>

  <!-- Your sketch runs as a module -->
  <script src="./story.js"></script>
  <script type="module" src="./sketch.js"></script>

  <style>
    html,body{margin:0;height:100%;background:black;overflow:hidden}
    canvas{display:block}
    #story-container{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;flex-direction:column;justify-content:center;align-items:center;text-align:center;display:none;z-index:10;color:white;background:rgba(0,0,0,0.6);padding:20px;box-sizing:border-box}
    #story-container>*{margin-bottom:1em}
    :root{
  --ink:#eaeaf2;
  --panel:rgba(0,0,0,0.55);
  --ring:#7dd3fc;
  --accentA1:#e879f9;  /* A = voice/motion */
  --accentA2:#a78bfa;
  --accentB1:#22d3ee;  /* B = listening/patience */
  --accentB2:#60a5fa;
}

@keyframes nebula-shimmer {
  0%{ background-position: 0% 50%; }
  100%{ background-position: 200% 50%; }
}

.btn{
  --g1:#ffffff22;          /* fallback border tint */
  --g2:#ffffff55;
  position: relative;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  gap:.5rem;
  padding:.65rem .9rem;
  border-radius:12px;
  color:var(--ink);
  background:
    linear-gradient(120deg, var(--g1), var(--g2)) border-box;         /* border base */
  border:1px solid transparent;
  background-clip: padding-box, border-box;
  backdrop-filter: blur(6px);
  -webkit-backdrop-filter: blur(6px);
  transition: transform .12s ease, box-shadow .12s ease, background .3s ease;
  cursor:pointer;
  user-select:none;
}

/* Animated gradient border using mask trick */
.btn::before{
  content:"";
  position:absolute; inset:-1px;
  border-radius:12px;
  padding:1px;
  background: linear-gradient(120deg, var(--accentA1), var(--accentA2), var(--accentB1), var(--accentB2));
  background-size: 300% 300%;
  -webkit-mask:
    linear-gradient(#000 0 0) content-box,
    linear-gradient(#000 0 0);
  -webkit-mask-composite: xor;
          mask-composite: exclude;
  animation: nebula-shimmer 6s linear infinite;
  pointer-events:none;
  opacity:.6;
}

.btn:hover{
  transform: translateY(-1px);
  box-shadow: 0 6px 22px rgba(80,150,255,.25);
}

.btn:active{
  transform: translateY(0);
  box-shadow: 0 2px 10px rgba(80,150,255,.18);
}

.btn:focus-visible{
  outline: none;
  box-shadow: 0 0 0 3px rgba(125,211,252,.55);
}

/* Reduce motion for sensitive users */
@media (prefers-reduced-motion: reduce){
  .btn, .btn::before{ animation: none !important; transition: none !important; }
}

/* Choice variants */
.choice.btn{
  background: linear-gradient(#0000,#0000), var(--panel);
  border:1px solid #ffffff25;
}

.choice.btn.btn--A{
  --accentA1:#ff9bd6; --accentA2:#c084fc; --accentB1:#ff9bd6; --accentB2:#c084fc; /* unify to A hues */
}

.choice.btn.btn--B{
  --accentA1:#7dd3fc; --accentA2:#60a5fa; --accentB1:#7dd3fc; --accentB2:#60a5fa; /* unify to B hues */
}

/* Selected pulse */
.choice.btn.picked{
  box-shadow: 0 0 0 3px rgba(255,255,255,.08), 0 10px 30px rgba(120,180,255,.28);
}

/* Replay button style */
#story-choices .again{
  composes: btn;
  display:inline-flex;
  padding:.6rem .9rem;
  border-radius:12px;
  background: linear-gradient(#0000,#0000), rgba(255,255,255,.05);
  border:1px solid #ffffff22;
}

/* Mode switch tabs */
#mode-switch button{
  composes: btn;
  font: 600 14px/1 system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
  padding:.55rem .85rem;
}

#mode-switch button.active{
  background: linear-gradient(#0000,#0000), rgba(255,255,255,.10);
  box-shadow: inset 0 0 0 1px rgba(255,255,255,.18), 0 6px 18px rgba(90,140,255,.22);
}

/* Fallback if "composes" unsupported */
#story-choices .again.btn, #mode-switch button.btn { /* no-op, keeps classes happy */ }

  </style>
</head>
<body>
  <div id="story-container">
    <h1 id="story-title"></h1>
    <div id="story-body"></div>
    <div id="story-choices"></div>
    <div id="story-ending"></div>
  </div>
</body>
</html>

