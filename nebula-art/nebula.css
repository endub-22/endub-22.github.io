:root{
  --ink:#eaeaf2;
  --panel:rgba(0,0,0,0.55);
  --ring:#7dd3fc;
  --accentA1:#e879f9;  /* A = voice/motion */
  --accentA2:#a78bfa;
  --accentB1:#22d3ee;  /* B = listening/patience */
  --accentB2:#60a5fa;
}

/* Layout for switch and story overlay */
#mode-switch {
  position: fixed;
  top: 16px; right: 16px;
  display: inline-flex; gap: 6px;
  z-index: 1000;
}
#story-ui {
  position: fixed;
  left: 16px; right: 16px; bottom: 16px;
  max-width: 720px; margin: 0 auto; padding: 16px;
  z-index: 900;
  color: var(--ink);
  background: #00000066;
  border: 1px solid #ffffff22;
  border-radius: 12px;
  backdrop-filter: blur(6px);
  -webkit-backdrop-filter: blur(6px);
}
#story-title { margin: 0 0 8px 0; font-size: 20px; }
#story-body { margin: 0 0 12px 0; font-size: 16px; }
#story-choices { display: flex; flex-wrap: wrap; gap: 8px; }
#story-path { margin-top: 8px; font-size: 12px; opacity: .8; }
.sr-only { position: absolute; height: 1px; width: 1px; overflow: hidden; clip: rect(1px,1px,1px,1px); white-space: nowrap; }

/* Buttons */
@keyframes nebula-shimmer { 0%{ background-position: 0% 50%; } 100%{ background-position: 200% 50%; } }

.btn{
  --g1:#ffffff22; --g2:#ffffff55;
  position: relative; display:inline-flex; align-items:center; justify-content:center; gap:.5rem;
  padding:.65rem .9rem; border-radius:12px; color:var(--ink);
  background: linear-gradient(120deg, var(--g1), var(--g2)) border-box;
  border:1px solid transparent; background-clip: padding-box, border-box;
  backdrop-filter: blur(6px); -webkit-backdrop-filter: blur(6px);
  transition: transform .12s ease, box-shadow .12s ease, background .3s ease;
  cursor:pointer; user-select:none; min-height: 40px; min-width: 44px;
}
.btn::before{
  content:""; position:absolute; inset:-1px; border-radius:12px; padding:1px;
  background: linear-gradient(120deg, var(--accentA1), var(--accentA2), var(--accentB1), var(--accentB2));
  background-size: 300% 300%;
  -webkit-mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
  -webkit-mask-composite: xor; mask-composite: exclude;
  animation: nebula-shimmer 6s linear infinite;
  pointer-events:none; opacity:.6;
}
.btn:hover{ transform: translateY(-1px); box-shadow: 0 6px 22px rgba(80,150,255,.25); }
.btn:active{ transform: translateY(0); box-shadow: 0 2px 10px rgba(80,150,255,.18); }
.btn:focus-visible{ outline: none; box-shadow: 0 0 0 3px rgba(125,211,252,.55); }
@media (prefers-reduced-motion: reduce){
  .btn, .btn::before{ animation: none !important; transition: none !important; }
}

/* Choice variants */
.choice.btn{
  background: linear-gradient(#0000,#0000), var(--panel);
  border:1px solid #ffffff25;
}
.choice.btn.btn--A{
  --accentA1:#ff9bd6; --accentA2:#c084fc; --accentB1:#ff9bd6; --accentB2:#c084fc;
}
.choice.btn.btn--B{
  --accentA1:#7dd3fc; --accentA2:#60a5fa; --accentB1:#7dd3fc; --accentB2:#60a5fa;
}
.choice.btn.picked{
  box-shadow: 0 0 0 3px rgba(255,255,255,.08), 0 10px 30px rgba(120,180,255,.28);
}

/* Replay button */
#story-choices .again{
  padding:.6rem .9rem; border-radius:12px; border:1px solid #ffffff22;
  background: linear-gradient(#0000,#0000), rgba(255,255,255,.05);
  color:#fff; cursor:pointer;
}

/* Mode switch tabs */
#mode-switch button{ font: 600 14px/1 system-ui, -apple-system, Segoe UI, Roboto, sans-serif; }
#mode-switch button.active{
  background: linear-gradient(#0000,#0000), rgba(255,255,255,.10);
  box-shadow: inset 0 0 0 1px rgba(255,255,255,.18), 0 6px 18px rgba(90,140,255,.22);
}

/* Click ripple for .btn */
.btn .ripple{
  position:absolute;
  border-radius:50%;
  transform: translate(-50%, -50%);
  background: radial-gradient(circle, #ffffffaa 0%, #ffffff44 40%, #ffffff00 70%);
  width:10px; height:10px;
  pointer-events:none; opacity:.8;
  animation: ripple .5s ease-out forwards;
}

@keyframes ripple {
  to { opacity: 0; width: 240px; height: 240px; }
}

